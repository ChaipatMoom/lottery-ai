<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏´‡∏ß‡∏¢ (Client-Side)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        body { font-family: 'Prompt', sans-serif; }
    </style>
</head>
<body class="bg-slate-100 text-slate-800">

    <nav class="bg-gradient-to-r from-indigo-900 to-purple-800 p-4 shadow-lg sticky top-0 z-50">
        <div class="container mx-auto flex justify-between items-center">
            <div class="flex items-center gap-2">
                <span class="text-3xl">üé∞</span>
                <div>
                    <h1 class="text-white text-xl font-bold">LottoGenius AI</h1>
                    <p class="text-indigo-200 text-xs">‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ú‡∏•‡∏´‡∏ß‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</p>
                </div>
            </div>
            <button onclick="window.scrollTo(0, document.body.scrollHeight)" class="bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-lg transition text-sm">
                + ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏•‡∏´‡∏ß‡∏¢‡πÉ‡∏´‡∏°‡πà
            </button>
        </div>
    </nav>

    <div class="container mx-auto p-4 max-w-6xl">

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8 mt-6">
            <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200">
                <h3 class="text-gray-500 text-sm font-semibold mb-2">üî• ‡πÄ‡∏•‡∏Ç‡∏ó‡πâ‡∏≤‡∏¢ 2 ‡∏ï‡∏±‡∏ß ‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏Å‡∏ö‡πà‡∏≠‡∏¢‡∏™‡∏∏‡∏î</h3>
                <div id="hot-numbers" class="flex flex-wrap gap-2">
                    </div>
            </div>

            <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200">
                <h3 class="text-gray-500 text-sm font-semibold mb-2">‚öñÔ∏è ‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô ‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏π‡πà vs ‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏µ‡πà</h3>
                <div class="h-32">
                    <canvas id="oddEvenChart"></canvas>
                </div>
            </div>

            <div class="bg-gradient-to-br from-indigo-500 to-purple-600 p-6 rounded-2xl shadow-md text-white">
                <h3 class="text-indigo-100 text-sm font-semibold mb-2">üîÆ ‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á AI (‡∏™‡∏π‡∏ï‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏™‡∏î)</h3>
                <div class="mt-4 text-center">
                    <p class="text-sm opacity-80">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏π‡∏á</p>
                    <div class="text-4xl font-bold mt-1 tracking-widest" id="prediction-number">--</div>
                    <p class="text-xs mt-2 bg-white/20 inline-block px-2 py-1 rounded">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á</p>
                </div>
            </div>
        </div>

        <div class="flex justify-between items-center mb-4">
            <h2 class="text-2xl font-bold text-slate-700">üìú ‡∏ú‡∏•‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á</h2>
            <select id="filter-type" onchange="renderData()" class="bg-white border border-gray-300 text-gray-700 py-2 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                <option value="all">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                <option value="TH">üáπüá≠ ‡∏´‡∏ß‡∏¢‡∏£‡∏±‡∏ê‡∏ö‡∏≤‡∏•‡πÑ‡∏ó‡∏¢</option>
                <option value="LAO">üá±üá¶ ‡∏´‡∏ß‡∏¢‡∏•‡∏≤‡∏ß‡∏û‡∏±‡∏í‡∏ô‡∏≤</option>
                <option value="HANOI">üáªüá≥ ‡∏´‡∏ß‡∏¢‡∏Æ‡∏≤‡∏ô‡∏≠‡∏¢</option>
            </select>
        </div>

        <div id="results-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-12">
            </div>

        <div class="bg-white p-6 rounded-2xl shadow-lg border-t-4 border-indigo-500 mb-10">
            <h3 class="text-lg font-bold mb-4">üìù ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏•‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡πÉ‡∏´‡∏°‡πà (Simulator)</h3>
            <form id="add-form" class="grid grid-cols-1 md:grid-cols-5 gap-4 items-end">
                <div class="md:col-span-1">
                    <label class="block text-sm font-medium text-gray-700 mb-1">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</label>
                    <select id="input-type" class="w-full p-2 border rounded-lg bg-gray-50">
                        <option value="TH">üáπüá≠ ‡πÑ‡∏ó‡∏¢</option>
                        <option value="LAO">üá±üá¶ ‡∏•‡∏≤‡∏ß</option>
                        <option value="HANOI">üáªüá≥ ‡∏Æ‡∏≤‡∏ô‡∏≠‡∏¢</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
                    <input type="date" id="input-date" class="w-full p-2 border rounded-lg bg-gray-50">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">3 ‡∏ï‡∏±‡∏ß‡∏ö‡∏ô</label>
                    <input type="number" id="input-top" placeholder="‡πÄ‡∏ä‡πà‡∏ô 590" class="w-full p-2 border rounded-lg bg-gray-50 text-center font-bold text-indigo-600">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">2 ‡∏ï‡∏±‡∏ß‡∏•‡πà‡∏≤‡∏á</label>
                    <input type="number" id="input-bottom" placeholder="‡πÄ‡∏ä‡πà‡∏ô 64" class="w-full p-2 border rounded-lg bg-gray-50 text-center font-bold text-pink-600">
                </div>
                <button type="submit" class="bg-indigo-600 hover:bg-indigo-700 text-white p-2 rounded-lg font-bold transition">
                    ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
                </button>
            </form>
        </div>

    </div>

    <script>
        // 1. ‡∏à‡∏≥‡∏•‡∏≠‡∏á Database (Array of Objects)
        // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏µ‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥ Browser ‡∏ñ‡πâ‡∏≤ Refresh ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏∞‡∏´‡∏≤‡∏¢‡πÑ‡∏õ (‡∏ñ‡πâ‡∏≤‡∏à‡∏∞‡πÉ‡∏´‡πâ‡∏à‡∏≥‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ LocalStorage)
        let lotteryDB = [
            { id: 1, type: 'TH', name: '‡∏´‡∏ß‡∏¢‡∏£‡∏±‡∏ê‡∏ö‡∏≤‡∏•‡πÑ‡∏ó‡∏¢', date: '2023-11-16', top: '990590', bottom: '64' },
            { id: 2, type: 'LAO', name: '‡∏´‡∏ß‡∏¢‡∏•‡∏≤‡∏ß‡∏û‡∏±‡∏í‡∏ô‡∏≤', date: '2023-11-20', top: '852123', bottom: '23' },
            { id: 3, type: 'HANOI', name: '‡∏´‡∏ß‡∏¢‡∏Æ‡∏≤‡∏ô‡∏≠‡∏¢‡∏õ‡∏Å‡∏ï‡∏¥', date: '2023-11-20', top: '411089', bottom: '89' },
            { id: 4, type: 'TH', name: '‡∏´‡∏ß‡∏¢‡∏£‡∏±‡∏ê‡∏ö‡∏≤‡∏•‡πÑ‡∏ó‡∏¢', date: '2023-11-01', top: '727202', bottom: '66' },
            { id: 5, type: 'LAO', name: '‡∏´‡∏ß‡∏¢‡∏•‡∏≤‡∏ß‡∏û‡∏±‡∏í‡∏ô‡∏≤', date: '2023-11-17', top: '154789', bottom: '89' },
            { id: 6, type: 'HANOI', name: '‡∏´‡∏ß‡∏¢‡∏Æ‡∏≤‡∏ô‡∏≠‡∏¢‡∏õ‡∏Å‡∏ï‡∏¥', date: '2023-11-19', top: '556112', bottom: '12' },
            { id: 7, type: 'TH', name: '‡∏´‡∏ß‡∏¢‡∏£‡∏±‡∏ê‡∏ö‡∏≤‡∏•‡πÑ‡∏ó‡∏¢', date: '2023-10-16', top: '931446', bottom: '44' },
        ];

        // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏≤‡∏ü
        let myChart = null;

        // --- Functions ---

        // 1. Render ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á
        function renderData() {
            const container = document.getElementById('results-grid');
            const filter = document.getElementById('filter-type').value;
            
            container.innerHTML = ''; // ‡∏•‡πâ‡∏≤‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏Å‡πà‡∏≤

            // ‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
            const filteredData = lotteryDB.filter(item => filter === 'all' || item.type === filter);

            // ‡∏ß‡∏ô‡∏•‡∏π‡∏õ‡∏™‡∏£‡πâ‡∏≤‡∏á Card HTML
            filteredData.forEach(item => {
                let badgeColor = item.type === 'TH' ? 'bg-purple-100 text-purple-700' : 
                                 item.type === 'LAO' ? 'bg-blue-100 text-blue-700' : 'bg-red-100 text-red-700';
                
                // ‡∏ï‡∏±‡∏î‡πÄ‡∏≠‡∏≤‡πÅ‡∏Ñ‡πà 3 ‡∏ï‡∏±‡∏ß‡∏ó‡πâ‡∏≤‡∏¢
                const top3 = item.top.slice(-3);

                const html = `
                    <div class="bg-white rounded-xl p-5 shadow-sm hover:shadow-md transition border-l-4 ${item.type === 'TH' ? 'border-purple-500' : item.type === 'LAO' ? 'border-blue-500' : 'border-red-500'}">
                        <div class="flex justify-between items-start mb-3">
                            <div>
                                <span class="text-xs font-bold px-2 py-1 rounded ${badgeColor}">${item.name}</span>
                                <p class="text-xs text-gray-400 mt-1">üìÖ ${item.date}</p>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-4 text-center">
                            <div class="bg-gray-50 rounded-lg p-2">
                                <p class="text-xs text-gray-500">3 ‡∏ï‡∏±‡∏ß‡∏ö‡∏ô</p>
                                <p class="text-xl font-bold text-slate-700">${top3}</p>
                            </div>
                            <div class="bg-gray-50 rounded-lg p-2">
                                <p class="text-xs text-gray-500">2 ‡∏ï‡∏±‡∏ß‡∏•‡πà‡∏≤‡∏á</p>
                                <p class="text-xl font-bold text-pink-600">${item.bottom}</p>
                            </div>
                        </div>
                    </div>
                `;
                container.innerHTML += html;
            });

            // ‡πÄ‡∏°‡∏∑‡πà‡∏≠ Render ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏™‡∏£‡πá‡∏à ‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÉ‡∏´‡∏°‡πà‡∏î‡πâ‡∏ß‡∏¢
            calculateStats(filteredData);
        }

        // 2. ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥ (‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡∏ô Backend Python)
        function calculateStats(data) {
            if (data.length === 0) return;

            // -- ‡∏´‡∏≤‡πÄ‡∏•‡∏Ç Hot (2 ‡∏ï‡∏±‡∏ß‡∏•‡πà‡∏≤‡∏á) --
            const frequency = {};
            let oddCount = 0;
            let evenCount = 0;

            data.forEach(item => {
                const num = item.bottom;
                frequency[num] = (frequency[num] || 0) + 1;

                // ‡∏ô‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏Ñ‡∏µ‡πà
                if (parseInt(num) % 2 === 0) evenCount++;
                else oddCount++;
            });

            // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà
            const sortedNumbers = Object.entries(frequency).sort((a, b) => b[1] - a[1]).slice(0, 5);
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• Hot Numbers
            const hotContainer = document.getElementById('hot-numbers');
            hotContainer.innerHTML = '';
            sortedNumbers.forEach(([num, count]) => {
                hotContainer.innerHTML += `
                    <div class="flex items-center space-x-2 bg-orange-50 px-3 py-1 rounded-full border border-orange-200">
                        <span class="text-lg font-bold text-orange-600">${num}</span>
                        <span class="text-xs text-gray-500 bg-white px-1 rounded-full">${count} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</span>
                    </div>
                `;
            });

            // -- ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• Prediction (‡∏™‡∏∏‡πà‡∏°‡πÅ‡∏ö‡∏ö‡∏°‡∏µ‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£ Mockup) --
            // ‡πÉ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏™‡∏π‡∏ï‡∏£‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏ô‡∏µ‡πâ
            const lastNum = parseInt(data[0].bottom);
            const predicted = (lastNum + 7) % 100; // ‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏™‡∏π‡∏ï‡∏£ +7
            document.getElementById('prediction-number').innerText = predicted.toString().padStart(2, '0');

            // -- ‡∏ß‡∏≤‡∏î‡∏Å‡∏£‡∏≤‡∏ü Pie Chart (‡∏Ñ‡∏π‡πà/‡∏Ñ‡∏µ‡πà) --
            const ctx = document.getElementById('oddEvenChart').getContext('2d');
            
            // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Å‡∏£‡∏≤‡∏ü‡πÄ‡∏Å‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏•‡∏≤‡∏¢‡∏Å‡πà‡∏≠‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà
            if (myChart) myChart.destroy();

            myChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏µ‡πà', '‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏π‡πà'],
                    datasets: [{
                        data: [oddCount, evenCount],
                        backgroundColor: ['#ec4899', '#3b82f6'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { position: 'right' } }
                }
            });
        }

        // 3. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà (Add New Data)
        document.getElementById('add-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const type = document.getElementById('input-type').value;
            const nameMap = {'TH': '‡∏´‡∏ß‡∏¢‡∏£‡∏±‡∏ê‡∏ö‡∏≤‡∏•‡πÑ‡∏ó‡∏¢', 'LAO': '‡∏´‡∏ß‡∏¢‡∏•‡∏≤‡∏ß‡∏û‡∏±‡∏í‡∏ô‡∏≤', 'HANOI': '‡∏´‡∏ß‡∏¢‡∏Æ‡∏≤‡∏ô‡∏≠‡∏¢'};

            const newData = {
                id: lotteryDB.length + 1,
                type: type,
                name: nameMap[type],
                date: document.getElementById('input-date').value || new Date().toISOString().split('T')[0],
                top: document.getElementById('input-top').value,
                bottom: document.getElementById('input-bottom').value
            };

            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤ Database (Array)
            lotteryDB.unshift(newData); // ‡πÉ‡∏™‡πà‡πÑ‡∏ß‡πâ‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏∏‡∏î

            // Render ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÉ‡∏´‡∏°‡πà
            renderData();
            
            // Reset Form
            e.target.reset();
            alert('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!');
        });

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏ß‡πá‡∏ö
        renderData();

    </script>
</body>
</html>
